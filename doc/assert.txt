Buster Assert 0.3.2 documentation
=================================
:Author: Christian Johansen
:Email: christian@cjohansen.no

A collection of assertions to be used with a unit testing framework.
*buster-assert* works well with any CommonJS compliant testing framework out of
the box, and can easily be configured to work with most any testing framework.

*buster-assert* contains lots of assertions. I strongly believe that high-level
assertions are essential in the interest of producing clear and intent-revealing
tests, and they also give you to-the-point failure messages even if you don't
specify custom assertion messages.

This document describes each assertion as well as extension points for
developers looking to either customize failure messages or using *buster-assert*
in other projects.

Table of contents
-----------------
* <<assertion-list,Assertions quick reference>>
* <<assertions,Assertions in details>>
* <<browser-assertions,Browser and DOM-specific assertions >>
* <<customize,Customizing and integrating with buster-assert>>
* <<license,License (BSD)>>

[[assertions]]
Assertions quick reference
--------------------------

This is a quick-reference of Buster assertions. Click on an assertion (or scroll
way down) for more detailed information and examples.

* <<assert,+buster.assert(actual[&#44; message])+>>
* <<assert-isTrue,+buster.assert.isTrue(actual[&#44; message])+>>
* <<assert-isFalse,+buster.assert.isFalse(actual[&#44; message])+>>
* <<assert-same,+buster.assert.same(expected&#44; actual[&#44; message])+>>
* <<assert-notSame,+buster.assert.notSame(expected&#44; actual[&#44; message])+>>
* <<assert-equals,+buster.assert.equals(actual&#44; expected[&#44; message])+>>
* <<assert-notEquals,+buster.assert.notEquals(actual&#44; expected[&#44; message])+>>
* <<assert-typeOf,+buster.assert.typeOf(object&#44; expected[&#44; message])+>>
* <<assert-notTypeOf,+buster.assert.notTypeOf(object&#44; expected[&#44; message])+>>
* <<assert-isString,+buster.assert.isString(object[&#44; message])+>>
* <<assert-isObject,+buster.assert.isObject(object[&#44; message])+>>
* <<assert-isFunction,+buster.assert.isFunction(object[&#44; message])+>>
* <<assert-isBoolean,+buster.assert.isBoolean(object[&#44; message])+>>
* <<assert-isNumber,+buster.assert.isNumber(object[&#44; message])+>>
* <<assert-isUndefined,+buster.assert.isUndefined(object[&#44; message])+>>
* <<assert-isNotUndefined,+buster.assert.isNotUndefined(object[&#44; message])+>>
* <<assert-isNull,+buster.assert.isNull(object[&#44; message])+>>
* <<assert-isNotNull,+buster.assert.isNotNull(object[&#44; message])+>>
* <<assert-isNaN,+buster.assert.isNaN(object[&#44; message])+>>
* <<assert-isNotNaN,+buster.assert.isNotNaN(object[&#44; message])+>>
* <<assert-isArray,+buster.assert.isArray(object[&#44; message])+>>
* <<assert-isNotArray,+buster.assert.isNotArray(actual[&#44; message])+>>
* <<assert-isArrayLike,+buster.assert.isArrayLike(actual[&#44; message])+>>
* <<assert-isNotArrayLike,+buster.assert.isNotArrayLike(actual[&#44; message])+>>
* <<assert-match,+buster.assert.match(actual&#44; matcher[&#44; message])+>>
* <<assert-noMatch,+buster.assert.noMatch(actual&#44; pattern[&#44; message])+>>
* <<assert-exception,+buster.assert.exception(callback[&#44; type[&#44; message]])+>>
* <<assert-noException,+buster.assert.noException(callback[&#44; message])+>>
* <<assert-isDelta,+buster.assert.inDelta(actual&#44; expected&#44; delta[&#44; message])+>>
* <<assert-notInDelta,+buster.assert.notInDelta(actual&#44; expected&#44; delta[&#44; message])+>>
* <<assert-tagName,+buster.assert.tagName(element&#44; tagName[&#44; message])+>>
* <<assert-notTagName,+buster.assert.notTagName(element&#44; tagName[&#44; message])+>>
* <<assert-className,+buster.assert.className(element&#44; tagName[&#44; message])+>>
* <<assert-notClassName,+buster.assert.notClassName(element&#44; tagName[&#44; message])+>>

[[assertions]]
Assertions
----------

All assertions live in the +buster.assert+ namespace. +buster.assert+ is itself
a function, the most generic assertion.

The default assertion messages can be overridden per assertion. The properties
to overwrite are listed with each assertion along with the arguments the string
is fed. For more customization options see the bottom of this document.

[[assert]]
+buster.assert(actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +actual+ is falsy (+0+, +""+, +null+, +undefined+, +NaN+). Fails with
either the provided message or "Expected null to be truthy". This behavior
differs from most other assertions, which prepend the failure message with the
optional message argument.

[source,javascript]
----
buster.assert({ not: "Falsy" }, "This will pass");
buster.assert(null, "This will fail");
buster.assert(null); // Fails
buster.assert(34);   // Passes
----

[[assert-isTrue]]
+buster.assert.isTrue(actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if the argument is not boolean +true+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isTrue({ not: "Falsy" }, "This will fail");
buster.assert.isTrue(true, "This will pass");
buster.assert.isTrue("Something"); // Fails
buster.assert.isTrue(true);        // Passes

Message
^^^^^^^

+buster.assert.isTrue.msgFail = "$\{0\}Expected $\{1\} to be true";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The value

[[assert-isFalse]]
+buster.assert.isFalse(actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if the argument is not boolean +false+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isFalse(false, "This will pass");
buster.assert.isFalse("", "This will fail");
buster.assert.isFalse({});    // Fails
buster.assert.isFalse(false); // Passes

Message
^^^^^^^

+buster.assert.isFalse.msgFail = "$\{0\}Expected $\{1\} to be false";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The value

[[assert-same]]
+buster.assert.same(expected, actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +actual+ *is not* the same object (+===+) as +expected+. To compare
similar objects, such as +{ name: "Chris", id: 42 }+ and +{ id: 42, name: "Chris"
}+ (not the same instance), see <<assert-equals,equals>>.
The optional message is prepended to the failure message if provided.

[source,javascript]
----
var obj = { id: 42, name: "Chris" };

buster.assert.same(obj, obj, "This will pass");
buster.assert.same(obj, { id: 42, name: "Chris" }, "This will fail");
buster.assert.same(obj, obj);                       // Passes
buster.assert.same(obj, { id: 42, name: "Chris" }); // Fails
----

Message
^^^^^^^

+buster.assert.same.msgFail = "$\{0\}Expected $\{1\} to be the same object as $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected object

[[assert-notSame]]
+buster.assert.notSame(expected, actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +actual+ *is* the same object (+===+) as +expected+. To compare
similar objects, such as +{ name: "Chris", id: 42 }+ and +{ id: 42, name: "Chris"
}+ (not the same instance), see <<assert-notEquals,notEquals>>.
The optional message is prepended to the failure message if provided.

[source,javascript]
var obj = { id: 42, name: "Chris" };
buster.assert.notSame(obj, { id: 42, name: "Chris" }, "This will pass");
buster.assert.notSame(obj, obj, "This will fail");
buster.assert.notSame(obj, { id: 42, name: "Chris" }); // Passes
buster.assert.notSame(obj, obj);                       // Fails

Message
^^^^^^^

+buster.assert.notSame.msgFail = "$\{0\}Expected $\{1\} not to be the same object as $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected object

[[assert-equals]]
+buster.assert.equals(actual, expected[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Compares +actual+ to +expected+ property for property. If the property count
does not match, or if any of +actual+'s properties does not match the
corresponding property in +expected+ the assertion fails.

If +actual+ is +null+ or +undefined+, an exact match is required. Date objects
are compared by their +getTime+ methods+. Regular expressions are compare by
their string representations. Primitives are compared using +==+, i.e., with
coercion.

+equals+ passes when comparing an +arguments+ object to an array if the both
contain the same elements.

The optional message is prepended to the failure message if provided.

[source,javascript]
var assert = buster.assert;
assert.equals({ name: "Professor Chaos" }, { name: "Professor Chaos" }, "This will pass");
assert.equals({ name: "Professor Chaos" }, { name: "Dr Evil" }, "This will fail");
assert.equals({ name: "Professor Chaos" }, { name: "Professor Chaos" }); // Passes
assert.equals({ name: "Professor Chaos" }, { name: "Dr Evil" });         // Fails

Message
^^^^^^^

+buster.assert.equals.msgFail = "$\{0\}Expected $\{1\} to be equal to $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected object

[[assert-notEquals]]
+buster.assert.notEquals(actual, expected[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Passes in any case where <<assert-equals,equals>> fails.

The optional message is prepended to the failure message if provided.

[source,javascript]
var assert = buster.assert;
assert.notEquals({ name: "Professor Chaos" }, { name: "Dr Evil" }, "This will pass");
assert.notEquals({ name: "Professor Chaos" }, { name: "Professor Chaos" }, "This will fail");
assert.notEquals({ name: "Professor Chaos" }, { name: "Dr Evil" });         // Passes
assert.notEquals({ name: "Professor Chaos" }, { name: "Professor Chaos" }); // Fails

Message
^^^^^^^

+buster.assert.notEquals.msgFail = "$\{0\}Expected $\{1\} not to be equal to $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected object

[[assert-typeOf]]
+buster.assert.typeOf(object, expected[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +typeof object+ is not +expected+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.typeOf({}, "object", "This will pass");
buster.assert.typeOf(null, "function", "This will fail");
buster.assert.typeOf({}, "object");     // Passes
buster.assert.typeOf(null, "function"); // Fails

Message
^^^^^^^

+buster.assert.typeOf.msgFail = "$\{0\}Expected typeof $\{1\} ($\{3\}) to be $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected type, a string
+$\{3\}+::
    +typeof object+

[[assert-notTypeOf]]
+buster.assert.notTypeOf(object, expected[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +typeof object+ is +expected+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.notTypeOf(null, "function", "This will pass");
buster.assert.notTypeOf({}, "object", "This will fail");
buster.assert.notTypeOf(null, "function"); // Passes
buster.assert.notTypeOf({}, "object");     // Fails

Message
^^^^^^^

+buster.assert.notTypeOf.msgFail = "$\{0\}Expected typeof $\{1\} not to be $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected type, a string

[[assert-isString]]
+buster.assert.isString(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not a string.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isString("Hey there", "This will pass");
buster.assert.isString({}, "This will fail");
buster.assert.isString("function");     // Passes
buster.assert.isString(function () {}); // Fails

Message
^^^^^^^

+buster.assert.isString.msgFail = "$\{0\}Expected typeof $\{1\} ($\{2\}) to be string";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isObject]]
+buster.assert.isObject(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not an object or if it is +null+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isObject({}, "This will pass");
buster.assert.isObject(42, "This will fail");
buster.assert.isObject([1, 2, 3]);      // Passes
buster.assert.isObject(function () {}); // Fails

Message
^^^^^^^

+buster.assert.isObject.msgFail = "$\{0\}Expected typeof $\{1\} ($\{2\}) to be object";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isFunction]]
+buster.assert.isFunction(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not a function.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isFunction(function () {}, "This will pass");
buster.assert.isFunction(42, "This will fail");
buster.assert.isFunction(function () {}); // Passes
buster.assert.isFunction([1, 2, 3]);      // Fails

Message
^^^^^^^

+buster.assert.isFunction.msgFail = "$\{0\}Expected typeof $\{1\} ($\{2\}) to be function";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isBoolean]]
+buster.assert.isBoolean(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not a boolean.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isBoolean(false, "This will pass");
buster.assert.isBoolean(42, "This will fail");
buster.assert.isBoolean(true);      // Passes
buster.assert.isBoolean([1, 2, 3]); // Fails

Message
^^^^^^^

+buster.assert.isBoolean.msgFail = "$\{0\}Expected typeof $\{1\} ($\{2\}) to be boolean";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isNumber]]
+buster.assert.isNumber(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not a number *or if it's NaN*. NaN is rarely an expected
value, even when expecting numbers. Use +isNaN+ to check explicitly for NaN, or
in those cases where you actually expect *any* number (including NaN), use
+assert.typeOf+. The optional message is prepended to the failure message if
provided.

[source,javascript]
buster.assert.isNumber(42, "This will pass");
buster.assert.isNumber({}, "This will fail");
buster.assert.isNumber(1423); // Passes
buster.assert.isNumber(NaN);  // Fails

Message
^^^^^^^

+buster.assert.isNumber.msgFail = "$\{0\}Expected $\{1\} ($\{2\}) to be a non-NaN number";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isUndefined]]
+buster.assert.isUndefined(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not +undefined+.
The optional message is prepended to the failure message if provided.

[source,javascript]
var a;
buster.assert.isUndefined(undefined, "This will pass");
buster.assert.isUndefined({}, "This will fail");
buster.assert.isUndefined(a);  // Passes
buster.assert.isUndefined({}); // Fails

Message
^^^^^^^

+buster.assert.isUndefined.msgFail = "$\{0\}Expected typeof $\{1\} ($\{2\}) to undefined";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isNotUndefined]]
+buster.assert.isNotUndefined(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is +undefined+.
The optional message is prepended to the failure message if provided.

[source,javascript]
----
var a;

buster.assert.isNotUndefined({}, "This will pass");
buster.assert.isNotUndefined(undefined, "This will fail");
buster.assert.isNotUndefined({});  // Passes
buster.assert.isNotUndefined(a); // Fails
----

Message
^^^^^^^

+buster.assert.isNotUndefined.msgFail = "$\{0\}Expected typeof $\{1\} ($\{2\}) not to be undefined";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    +typeof object+

[[assert-isNull]]
+buster.assert.isNull(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not +null+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isNull(null, "This will pass");
buster.assert.isNull({}, "This will fail");
buster.assert.isNull(null); // Passes
buster.assert.isNull({});   // Fails

Message
^^^^^^^

+buster.assert.isNull.msgFail = "$\{0\}Expected $\{1\} to be null";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-isNotNull]]
+buster.assert.isNotNull(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is +null+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isNotNull({}, "This will pass");
buster.assert.isNotNull(null, "This will fail");
buster.assert.isNotNull({});   // Passes
buster.assert.isNotNull(null); // Fails

Message
^^^^^^^

+buster.assert.isNotNull.msgFail = "$\{0\}Expected not to be null";+

[horizontal]
+$\{0\}+::
    The custom message, if any

[[assert-isNaN]]
+buster.assert.isNaN(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not +NaN+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isNaN(NaN, "This will pass");
buster.assert.isNaN(24, "This will fail");
buster.assert.isNaN(NaN);    // Passes
buster.assert.isNaN([1, 3]); // Fails

Message
^^^^^^^

+buster.assert.isNaN.msgFail = "$\{0\}Expected $\{1\} to be NaN";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-isNotNaN]]
+buster.assert.isNotNaN(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is +NaN+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isNotNaN(24, "This will pass");
buster.assert.isNotNaN(NaN, "This will fail");
buster.assert.isNotNaN({});  // Passes
buster.assert.isNotNaN(NaN); // Fails

Message
^^^^^^^

+buster.assert.isNotNaN.msgFail = "$\{0\}Expected $\{1\} not to be NaN";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-isArray]]
+buster.assert.isArray(object[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +object+ is not a true array.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isArray([1, ""], "This will pass");
buster.assert.isArray(42, "This will fail");
buster.assert.isArray([]);  // Passes
buster.assert.isArray({});  // Fails

Message
^^^^^^^

+buster.assert.isArray.msgFail = "$\{0\}Expected $\{1\} to be array";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-isNotArray]]
+buster.assert.isNotArray(actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +actual+ is a true array.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isNotArray(42, "This will pass");
buster.assert.isNotArray([1, ""], "This will fail");
buster.assert.isNotArray({});  // Passes
buster.assert.isNotArray([]);  // Fails

Message
^^^^^^^

+buster.assert.isNotArray.msgFail = "$\{0\}Expected $\{1\} not to be array";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-isArrayLike]]
+buster.assert.isArrayLike(actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +actual+ is not array-like. Array-like objects include true arrays,
+arguments+ objects and objects that have both a numeric +length+ property and a
+slice+ method.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isArrayLike({ length: 1, slice: function () {}, "0": 6 }, "This will pass");
buster.assert.isArrayLike({ length: 1 }, "This will fail"); // Misses slice method
buster.assert.isArrayLike([1, 2, 3]); // Passes
buster.assert.isArrayLike(42);        // Fails

Message
^^^^^^^

+buster.assert.isArrayLike.msgFail = "$\{0\}Expected $\{1\} to be array like";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-isNotArrayLike]]
+buster.assert.isNotArrayLike(actual[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +actual+ is array-like. Array-like objects include true arrays,
+arguments+ objects and objects that have both a numeric +length+ property and a
+slice+ method.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.isNotArrayLike({ length: 1 }, "This will pass"); // Misses slice method
buster.assert.isNotArrayLike({ length: 1, slice: function () {}, "0": 6 }, "This will fail");
buster.assert.isNotArrayLike(42);        // Passes
buster.assert.isNotArrayLike([1, 2, 3]); // Fails

Message
^^^^^^^

+buster.assert.isNotArrayLike.msgFail = "$\{0\}Expected $\{1\} not to be array like";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object

[[assert-match]]
+buster.assert.match(actual, matcher[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +matcher+ is not a partial match about +actual+. Accepts a wide range
of input combinations.

String matcher
^^^^^^^^^^^^^^

In its simplest form, +buster.assert.match+ performs a case insensitive
substring match. When the matcher is a string, the +actual+ object is converted
to a string, and the assertion passes if +actual+ is a case-insensitive
substring of +expected+ as a string.

[source,javascript]
buster.assert.match("Give me something", "Give", "This will pass");
buster.assert.match("Give me something", "sumptn", "This will fail");
buster.assert.match("Yeah", { toString: function () { return "yeah!"; } }); // Passes
buster.assert.match("Oh no", /[a-z]/); // Fails

Regular expression matcher
^^^^^^^^^^^^^^^^^^^^^^^^^^

When the matcher is a regular expression, the assertion will pass if
+expected.test(actual)+ is true. +assert.match+ is written in a generic way, so
any object with a +test+ method will be used as a matcher this way.

[source,javascript]
buster.assert.match("Give me something", /^[a-z\s]$/i, "This will pass");
buster.assert.match("Give me something", /[0-9]/, "This will fail");
buster.assert.match({ toString: function () { return "yeah!"; } }, /yeah/); // Passes
buster.assert.match(234, /[a-z]/); // Fails

Number matcher
^^^^^^^^^^^^^^

When the matcher is a number, the assertion will pass if +matcher == actual+.

[source,javascript]
buster.assert.match("123", 123, "This will pass");
buster.assert.match("Give me something", 425, "This will fail");
buster.assert.match({ toString: function () { return "42"; } }, 42); // Passes
buster.assert.match(234, 1234); // Fails

Function matcher
^^^^^^^^^^^^^^^^

When the matcher is a function, it is called with +actual+ as its only
argument. The assertion will pass if the function returns +true+. A strict match
is performed against the return value, so a boolean +true+ is required, truthy
is not enough.

[source,javascript]
buster.assert.match("123", function (exp) { return exp == "123"; }, "This will pass");
buster.assert.match("Give me something", function () { return "ok"; }, "This will fail");
buster.assert.match({ toString: function () { return "42"; } }, function () { return true; }); // Passes
buster.assert.match(234, function () {}); // Fails

Object matcher
^^^^^^^^^^^^^^

As mentioned above, if an object matcher defines a +test+ method the assertion
will pass if +matcher.test(actual+ returns truthy. If the object does not have
a +test+ method, a recursive match is performed. If all properties of +matcher+
matches coresponding properties in +actual+, the assertion passes.

[source,javascript]
----
buster.assert.match("123", {
    test: function (arg) {
        return arg == 123;
    }
}, "This will pass");

buster.assert.match({}, { prop: 42 }, "This will fail");

buster.assert.match({
    name: "Chris",
    profession: "Programmer"
}, {
    name: "Chris"
}); // Passes

buster.assert.match(234, {
    name: "Chris"
}); // Fails
----

Messages
^^^^^^^^

+buster.assert.match.msgException = "$\{0\}$\{1\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    Message from exception thrown by matcher function. An exception is thrown if
    the matcher if not any of the accepted types, such as a boolean.

+assert.match.msgFail = "$\{0\}Expected $\{1\} to match $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual object
+$\{2\}+::
    The expected object

[[assert-noMatch]]
+buster.assert.noMatch(actual, pattern[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails in cases where +assert.match+ passes. Please refer to the above
documentation for an explanation of how this works.

Messages
^^^^^^^^

+buster.assert.noMatch.msgException = "$\{0\}$\{1\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    Message from exception thrown by matcher function. An exception is thrown if
    the matcher if not any of the accepted types, such as a boolean.

+buster.assert.noMatch.msgFail = "$\{0\}Expected $\{1\} not to match $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual objetc
+$\{2\}+::
    The expected object

[[assert-exception]]
+buster.assert.exception(callback[, type[, message]])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +callback+ does not throw an exception. If the optional +type+ is
provided, the assertion fails if the callback either does not throw an
exception, *or* if the exception is not of the given type (determined by its
+name+ property).
The optional message is prepended to the failure message if provided.

[source,javascript]
----
buster.assert.exception(function () {
    throw new Error("Ooops!");
}, null, "This will pass");

buster.assert.exception(function () {}, null, "This will fail");

buster.assert.exception(function () {
    throw new Error("Ooops!");
}); // Passes

buster.assert.exception(function () {}); // Fails

buster.assert.exception(function () {
    throw new TypeError("Ooops!");
}, "TypeError", "This will pass");

buster.assert.exception(function () {
    throw new Error("Aww");
}, "TypeError", "This will fail, wrong exception type");

buster.assert.exception(function () {
    throw new Error("Ooops!");
}, "Error"); // Passes

buster.assert.exception(function () {}, "TypeError"); // Fails
----

Messages
^^^^^^^^

+buster.assert.exception.msgTypeNoException = "$\{0\}Expected $\{1\} but no exception was thrown";+

+buster.assert.exception.msgFail = "$\{0\}Expected exception";+

+buster.assert.exception.msgTypeFail = "$\{0\}Expected $\{1\} but threw $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The expected exception type (if provided)
+$\{2\}+::
    The type of exception thrown (if any)

[[assert-noException]]
+buster.assert.noException(callback[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if +callback+ throws an exception.
The optional message is prepended to the failure message if provided.

[source,javascript]
----
buster.assert.noException(function () {
    // Exercise code...
}, "This will pass");

buster.assert.noException(function () {
    throw new Error("Ooops!");
}, "This will fail");

buster.assert.noException(function () {
    // Exercise code...
}); // Passes

buster.assert.noException(function () {
    throw new TypeError("Ooops!");
}); // Fails
----

Message
^^^^^^^

+buster.assert.noException.msgFail = "$\{0\}Expected not to throw but threw $\{1\}";+

+buster.assert.exception.msgTypeFail = "$\{0\}Expected $\{1\} but threw $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The type of exception thrown (if any)

[[assert-isDelta]]
+buster.assert.inDelta(actual, expected, delta[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Compares numbers with a delta. Fails if the +actual+ number differs from the
+expected+ number by more than +/- +delta+.

[source,javascript]
----
buster.assert.inDelta(3, 2.9, 0.1, "This will pass");
buster.assert.inDelta(3, 2.9, 0.01, "This will fail");
buster.assert.inDelta(1, 1, 0); // Passes
buster.assert.inDelta(1, 1.2, 0.1); // Fails
----

Message
^^^^^^^

+buster.assert.inDelta.msgFail = "$\{0\}Expected $\{1\} to be equal to $\{2\} +/- $\{3\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual number
+$\{2\}+::
    The expected number
+$\{3\}+::
    The delta

[[assert-notInDelta]]
+buster.assert.notInDelta(actual, expected, delta[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Compares numbers with a delta. Fails if the +actual+ number does not differ from
the +expected+ number by more than +/- +delta+.

[source,javascript]
----
buster.assert.notInDelta(3, 2.5, 0.1, "This will pass");
buster.assert.notInDelta(3, 3, 0.01, "This will fail");
buster.assert.notInDelta(1, 0.9, 0); // Passes
buster.assert.notInDelta(1, 1.2, 0.2); // Fails
----

Message
^^^^^^^

+buster.assert.inDelta.msgFail = "$\{0\}Expected $\{1\} not to be equal to $\{2\} +/- $\{3\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The actual number
+$\{2\}+::
    The expected number
+$\{3\}+::
    The delta

[[dom-assertions]]
Browser/DOM-specific assertions
-------------------------------

[[assert-tagName]]
+buster.assert.tagName(element, tagName[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if the +element+ either does not specify a +tagName+ property, or if its
value is not a case-insensitive match with the expected +tagName+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.tagName(document.createElement("p"), "p", "This will pass");
buster.assert.tagName(document.createElement("p"), "li", "This will fail");
buster.assert.tagName(document.createElement("h2"), "H2"); // Passes
buster.assert.tagName(document.createElement("p"), "li");  // Fails

Message
^^^^^^^

+buster.assert.tagName.msgNoTagName = "$\{0\}Expected $\{2\} to have tagName property";+

+buster.assert.tagName.msgFail = "$\{0\}Expected tagName to be $\{1\} but was $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The expected +tagName+
+$\{2\}+::
    If the object does not have a +tagName+ property, this is the
    object. Otherwise, it is the value of +object.tagName+.

[[assert-notTagName]]
+buster.assert.notTagName(element, tagName[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if the +element+ either does not specify a +tagName+ property, or if its
value *is* a case-insensitive match with the expected +tagName+.
The optional message is prepended to the failure message if provided.

[source,javascript]
buster.assert.notTagName(document.createElement("p"), "LI", "This will pass");
buster.assert.notTagName(document.createElement("p"), "p", "This will fail");
buster.assert.notTagName(document.createElement("h2"), "H3"); // Passes
buster.assert.notTagName(document.createElement("p"), "p");   // Fails

Message
^^^^^^^

+buster.assert.notTagName.msgNoTagName = "$\{0\}Expected $\{2\} to have tagName property";+

+buster.assert.notTagName.msgFail = "$\{0\}Expected tagName not to be $\{1\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The expected +tagName+
+$\{2\}+::
    If the object does not have a +tagName+ property, this is the
    object.

[[assert-className]]
+buster.assert.className(element, tagName[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if the +element+ either does not specify a +className+ property, or if its
value is not a space-separated list of all class names in +classNames+.

+classNames+ can be either a space-delimited string or an array of class
names. Every class specified by +classNames+ must be found in the object's
+className+ property for the assertion to pass, but order does not matter.

The optional message is prepended to the failure message if provided.

[source,javascript]
----
var el = document.createElement("p");
el.className = "feed item blog-post";

buster.assert.className(el, "item", "This will pass");
buster.assert.className(el, "news", "This will fail");
buster.assert.className(el, "blog-post feed"); // Passes
buster.assert.className(el, "feed items");     // Fails, "items" is not a match
buster.assert.className(el, ["item", "feed"]); // Passes
----

Message
^^^^^^^

+buster.assert.className.msgNoClassName = "$\{0\}Expected object to have className property";+

+buster.assert.className.msgFail = "$\{0\}Expected object's className to include $\{1\} but was $\{2\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The expected +classNames+
+$\{2\}+::
    The value of the object's +className+ property, if any.

[[assert-notClassName]]
+buster.assert.notClassName(element, tagName[, message])+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Fails if the +element+ either does not specify a +className+ property, or if its
value *is* a space-separated list of all class names in +classNames+.

+classNames+ can be either a space-delimited string or an array of class
names. If any class specified by +classNames+ is not found in the object's
+className+ property the assertion passes. Order does not matter.

The optional message is prepended to the failure message if provided.

[source,javascript]
----
var el = document.createElement("p");
el.className = "feed item blog-post";

buster.assert.notClassName(el, "chicken", "This will pass");
buster.assert.notClassName(el, "news", "This will fail");
buster.assert.notClassName(el, "blog-post rss");  // Passes
buster.assert.notClassName(el, "feed item");      // Fails
buster.assert.notClassName(el, ["item", "feed"]); // Passes
----

Message
^^^^^^^

+buster.assert.notClassName.msgNoClassName = "$\{0\}Expected object to have className property";+

+buster.assert.notClassName.msgFail = "$\{0\}Expected object's className not to include $\{1\}";+

[horizontal]
+$\{0\}+::
    The custom message, if any
+$\{1\}+::
    The expected +classNames+
+$\{2\}+::
    The value of the object's +className+ property, if any. Otherwise, the
    object itself.

[[customize]]
Customizing and integrating with buster-assert
----------------------------------------------

*buster-assert* is written in a generic way and can be used entirely on its
own. If your testing framework is CommonJS compliant, chances are you can just
drop *buster-assert* right in and immediately start using it.

Customizing assertion messages
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Every assertion gets its messages from properties on the function itself, and
they are all listed above. If you don't like a specific message, simply
overwrite them:

[source,javascript]
buster.assert.equals.msgFail = "They didn't match!!!";

Most messages can reference the actual and expected values along with the
user-provided message. These arguments are available as switches like +\{n\}+,
where +n+ is the numbered argument. See each assertion for what values are
available.

Customizing object formatting for assertion messages
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Values inserted into assertion messages using the +\{n\}+ switches are formatted
using +buster.assert.format(obj)+. By default this method simply coerces the
object to a string. In most cases, that is not very useful. A better option is
to use +buster.format.ascii+, which is a generic function for formatting objects
nicely as ascii. For nice ascii formatting of objects (including DOM elements) do:

[source,javascript]
buster.assert.format = buster.format.ascii;

Assertion counter
~~~~~~~~~~~~~~~~~

*buster-assert* keeps an internal assertion counter, +buster.assert.count+ which
is incremented anytime an assertion is called. The assertion counter can be
reset to any number at your convenience.

Assertion failures
~~~~~~~~~~~~~~~~~~

When an assertion fails, it calls +buster.assert.fail+ with the failure message
as the only argument. The built-in +buster.assert.fail+ function throws an
+AssertionError+ which can be caught and handled by the testing framework. If
this behavior is not suitable for your testing framework of choice, you can
override +buster.fail+ to make it do the right thing.

For instance, to use *buster-assert* with JsTestDriver, you can simply configure
it as follows:

[source,javascript]
buster.assert.fail = function (message) {
    fail(message);
};

Where the global +fail+ function is the one provided by JsTestDriver.

Assertion passes
~~~~~~~~~~~~~~~~

Much like the failure hook, buster-assert also provides a hook for when
assertions pass: +buster.assert.pass+. This hook is called with the name of the
assertion followed by the arguments passed to the assertion. If no custom
message was passed to the assertion, an empty string is sent in its place:

[source,javascript]
buster.assert.pass = function (assertion, msg/*, expected, actual, ...*/) {
    console.log.apply(console, arguments);
}

Note that the arguments passed to +buster.assert.pass+ varies for each
assertion beyond the assertion name and custom message.

[[license]]
buster-assert license
---------------------

include::../LICENSE[]
